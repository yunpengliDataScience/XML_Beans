package example.main;

import java.io.File;

import javax.xml.bind.JAXBContext;
import javax.xml.bind.JAXBException;
import javax.xml.bind.Marshaller;
import javax.xml.bind.Unmarshaller;

import example.xjc.CD;
import example.xjc.Catalog;

public class MainApplication {

	public static void main(String[] args) {
		System.out.println("hello world!");

		unmarshallTest();

		marshallTest();
		
		manipulateXML();
	}

	private static void manipulateXML() {
		try {
			JAXBContext jaxbContext = JAXBContext.newInstance(Catalog.class);

			Unmarshaller jaxbUnmarshaller = jaxbContext.createUnmarshaller();

			// Unmarshalling (Convert XML instance into Java objects)
			Catalog catalog = (Catalog) jaxbUnmarshaller
					.unmarshal(new File("C:\\Projects\\XML_Project\\Code\\cd_catalog.xml"));

			System.out.println(catalog);
			
			

		} catch (JAXBException e) {

			e.printStackTrace();
		}
		
	}

	public static void unmarshallTest() {
		try {
			JAXBContext jaxbContext = JAXBContext.newInstance(Catalog.class);

			Unmarshaller jaxbUnmarshaller = jaxbContext.createUnmarshaller();

			//-------------------------------------------------------------------
			//Load XML to Java objects
			// Unmarshalling (Convert XML instance into Java objects)
			//-------------------------------------------------------------------
			Catalog catalog = (Catalog) jaxbUnmarshaller
					.unmarshal(new File("C:\\Projects\\XML_Project\\Code\\cd_catalog.xml"));

			// Create a CD object
			CD cd = new CD();
			cd.setARTIST("Yunpeng Li");
			cd.setCOMPANY("BAE");
			cd.setCOUNTRY("USA");
			cd.setPRICE(15);
			cd.setTITLE("Enigma");
			cd.setYEAR(Short.valueOf("2021"));

			// Add the new CD object into the Catalog object
			catalog.addACD(cd);
			
			
			//-------------------------------------------------------------
			//Write the modified Java objects back to XML.
			//-------------------------------------------------------------
			Marshaller jaxbMarshaller = jaxbContext.createMarshaller();
			
			File file = new File("C:\\Projects\\XML_Project\\Code\\cd_catalog_new2.xml");

			// output pretty printed
			jaxbMarshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);

			// Marshalling (Convert Java objects into XML)
			jaxbMarshaller.marshal(catalog, file);
			jaxbMarshaller.marshal(catalog, System.out);

		} catch (JAXBException e) {

			e.printStackTrace();
		}
	}

	public static void marshallTest() {

		// Create a Catalog object
		Catalog catalog = new Catalog();

		// Create a CD object
		CD cd = new CD();
		cd.setARTIST("Yunpeng Li");
		cd.setCOMPANY("BAE");
		cd.setCOUNTRY("USA");
		cd.setPRICE(15);
		cd.setTITLE("Enigma");
		cd.setYEAR(Short.valueOf("2021"));

		// Add the new CD object into the Catalog object
		catalog.addACD(cd);

		JAXBContext jaxbContext;
		try {

			jaxbContext = JAXBContext.newInstance(Catalog.class);

			Marshaller jaxbMarshaller = jaxbContext.createMarshaller();

			File file = new File("C:\\Projects\\XML_Project\\Code\\cd_catalog_new.xml");

			// output pretty printed
			jaxbMarshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);

			// Marshalling (Convert Java objects into XML)
			jaxbMarshaller.marshal(catalog, file);
			jaxbMarshaller.marshal(catalog, System.out);
		} catch (JAXBException e) {
			e.printStackTrace();
		}

	}

}
=============================================
<jxb:bindings 
    xmlns:xs="http://www.w3.org/2001/XMLSchema"
    xmlns:jxb="http://java.sun.com/xml/ns/jaxb"
    version="2.1">

    <jxb:bindings schemaLocation="cd_catalog0.xsd">
            <jxb:bindings node="//xs:complexType[@name='CATALOGType']">
                <jxb:class name="Catalog"/>
            </jxb:bindings>
			<jxb:bindings node="//xs:complexType[@name='CDType']">
                <jxb:class name="CD"/>
            </jxb:bindings>
    </jxb:bindings>

</jxb:bindings>
